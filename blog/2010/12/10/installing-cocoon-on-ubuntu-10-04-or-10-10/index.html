
<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang='en-US' class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html -->
<title>Installing Cocoon on Ubuntu 10.04 or 10.10 - Quinn Dombrowski</title>
<meta name="description" content="This is an updated version of a how-to written for Intrepid (8.10), now horrendously out-of-date. It was written for Maverick (10.10) but should also work on Lucid (10.04). No knowledge of Ubuntu or Linux is assumed...">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Quinn Dombrowski">
<meta property="og:title" content="Installing Cocoon on Ubuntu 10.04 or 10.10">
<meta property="og:url" content="https://www.quinndombrowski.com/blog/2010/12/10/installing-cocoon-on-ubuntu-10-04-or-10-10/">


  <meta property="og:description" content="This is an updated version of a how-to written for Intrepid (8.10), now horrendously out-of-date. It was written for Maverick (10.10) but should also work on Lucid (10.04). No knowledge of Ubuntu or Linux is assumed...">



  <meta property="og:image" content="https://www.quinndombrowski.com">





  <meta property="article:published_time" content="2010-10-10T00:00:00+00:00">






<link rel="canonical" href="https://www.quinndombrowski.com/blog/2010/12/10/installing-cocoon-on-ubuntu-10-04-or-10-10/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Quinn Dombrowski",
      "url": "https://www.quinndombrowski.com/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Quinn Dombrowski Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/styles/minimal-mistakes.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Quinn Dombrowski
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li><li class="masthead__menu-item">
              <a href="/cv/">CV</a>
            </li><li class="masthead__menu-item">
              <a href="/projects/">Projects</a>
            </li><li class="masthead__menu-item">
              <a href="/blog/">Blog</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      




<div id="main" role="main">
  


  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    
    
    <meta itemprop="datePublished" content="2010-10-10T00:00:00+00:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title p-name" itemprop="headline">
            <a href="https://www.quinndombrowski.com/blog/2010/12/10/installing-cocoon-on-ubuntu-10-04-or-10-10/" class="u-url" itemprop="url">Installing Cocoon on Ubuntu 10.04 or 10.10</a>
          </h1>
          


        </header>
      

      <section class="page__content e-content" itemprop="text">
        
        <p>&lt;p&gt;This is an updated version of a &lt;a href=&quot;/blog/2010/04/15/installing-cocoon-on-ubuntu/&quot;&gt;how-to written for Intrepid (8.10)&lt;/a&gt;, now horrendously out-of-date. It was written for Maverick (10.10) but should also work on Lucid (10.04).&lt;/p&gt;
&lt;p&gt;No knowledge of Ubuntu or Linux is assumed; the intended audience is someone who's managed to install Ubuntu and isn't too intimidated by the Terminal. &lt;em&gt;(Hint: You can copy and paste, but in Terminal, pasting is Ctrl + &lt;strong&gt;Shift&lt;/strong&gt; +C)&lt;/em&gt;&lt;/p&gt;
&lt;h3&gt;Step 1: Installing Java SDK&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;(Thanks to &lt;a href=&quot;http://happy-coding.com/install-sun-java6-jdk-on-ubuntu-10-04-lucid/&quot;&gt;Daniel Bruegge&lt;/a&gt; for the tip)&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Open the Terminal (Applications &gt; Accessories &gt; Terminal)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;On Maverick:&lt;/strong&gt; type:&lt;br /&gt;
&lt;pre&gt;sudo add-apt-repository &quot;deb &lt;a href=&quot;http://archive.canonical.com/&quot; title=&quot;http://archive.canonical.com/&quot;&gt;http://archive.canonical.com/&lt;/a&gt; maverick partner&quot;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;On Lucid:&lt;/strong&gt; type:&lt;br /&gt;
&lt;pre&gt;sudo add-apt-repository &quot;deb &lt;a href=&quot;http://archive.canonical.com/&quot; title=&quot;http://archive.canonical.com/&quot;&gt;http://archive.canonical.com/&lt;/a&gt; lucid partner&quot;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;Type:&lt;br /&gt;
&lt;pre&gt;sudo apt-get update&lt;/pre&gt;&lt;p&gt; This will check all the software repositories for what updates are available, including java.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;Type:&lt;br /&gt;
&lt;pre&gt;sudo apt-get install sun-java6-jdk&lt;/pre&gt;&lt;p&gt; It will ask you if you want to continue; type &lt;em&gt;y&lt;/em&gt; to confirm.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;You'll have to agree to the TOS and license (you can use the tab key to move between the options) and then it'll install on its own.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Step 2: Installing Maven&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Open Terminal, and type&lt;br /&gt;
&lt;pre&gt;sudo apt-get install maven2&lt;/pre&gt;&lt;p&gt; This will list all the packages that need to be installed; type &lt;em&gt;y&lt;/em&gt; to proceed&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Step 3: Installing Cocoon&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Open the Terminal and type&lt;br /&gt;
&lt;pre&gt;mvn archetype:generate -DarchetypeCatalog=http://cocoon.apache.org&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;This begins the install process.
&lt;ul&gt;
&lt;li&gt;For archetype, choose 2&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Define value for groupId:&lt;/em&gt; - This should be a unique value. A classic value to use is, if you own the namespace myurl.com, you could type &lt;em&gt;com.myurl&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Define value for artifactId:&lt;/em&gt; cocoon&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Define value for version: 1.0-SNAPSHOT:&lt;/em&gt; 1.0.0&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Define value for package:&lt;/em&gt; - groupID.cocoon (i.e. &lt;em&gt;com.myurl.cocoon&lt;/em&gt;)&lt;/li&gt;
&lt;li&gt;Confirm the properties&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;After everything's done installing, you should see &lt;em&gt;[INFO] BUILD SUCCESSFUL&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Cocoon will install in your Home folder, in a folder named the same thing as whatever you put for your artifactID. Here, the folder is named &lt;em&gt;cocoon&lt;/em&gt;.&lt;/p&gt;
&lt;h3&gt;Step 4: Starting Jetty&lt;/h3&gt;
&lt;p&gt;You need to make a configuration change in the Maven &lt;em&gt;settings.xml&lt;/em&gt; to be able to run Jetty. &lt;em&gt;(Thanks to &lt;a href=&quot;http://ganeshgembali.wordpress.com/2008/12/29/maven-jetty-org-apache-maven-plugins/&quot;&gt;Ganesh Gembali&lt;/a&gt; for the tip.)&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Open up Terminal and type&lt;br /&gt;
&lt;pre&gt;sudo gedit /etc/maven2/settings.xml&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;This will pop up a text editor with &lt;em&gt;settings.xml&lt;/em&gt;. Search for &lt;em&gt;pluginGroups&lt;/em&gt;, and between&lt;br /&gt;
&lt;plugingroups&gt; and &lt;/plugingroups&gt;, add
&lt;pre&gt;&lt;plugingroup&gt;org.mortbay.jetty&lt;/plugingroup&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;Make sure you're in your cocoon directory in Terminal (does it say &lt;em&gt;~/cocoon$&lt;/em&gt; right before the cursor?), and type&lt;br /&gt;
&lt;pre&gt;mvn jetty:run&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;There'll be a lot more installing, but it should conclude with &lt;em&gt;[INFO] Started Jetty Server&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Open a browser and go to &lt;a href=&quot;http://localhost:8888/cocoon&quot; title=&quot;http://localhost:8888/cocoon&quot;&gt;http://localhost:8888/cocoon&lt;/a&gt; - you should see a message saying Apache Cocoon: Welcome&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Step 5: Cocoon Add-ons&lt;/h3&gt;
&lt;p&gt;There are a couple add-ons for Cocoon that are essentials-- like generators for HTML. If you want to use XSLT 2.0, Saxon 9 is also critical. Possibly less important are the FOP processor (to generate PDFs from XSL-FO), Batik (for SVG) and Forms (to genrate forms). If you don't need to use XSLT 2.0, you can skip the first part of this section.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Installing Saxon 9 &lt;em&gt;- a good idea&lt;/em&gt;
&lt;ul&gt;
&lt;li&gt;Open your &lt;em&gt;cocoon&lt;/em&gt; directory and navigate to src/main/resources/META-INF/cocoon&lt;/li&gt;
&lt;li&gt;Create directory &lt;em&gt;avalon&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Create the following files in Text Editor (Applications &gt; Accessories &gt; Text Editor), and place them in the avalon directory:
&lt;ul&gt;
&lt;li&gt;File named &lt;strong&gt;cocoon-core-xslt-saxon.xconf&lt;/strong&gt;&lt;br /&gt;
&lt;pre&gt;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;??&gt;
&lt;components&gt;
&lt;component role=&quot;org.apache.excalibur.xml.xslt.XSLTProcessor/saxon&quot; class=&quot;org.apache.cocoon.components.xslt.TraxProcessor&quot;&gt;</p>
<p>&lt;parameter name=&quot;use-store&quot; value=&quot;true&quot;&gt;&lt;/parameter&gt;
&lt;parameter name=&quot;transformer-factory&quot; value=&quot;net.sf.saxon.TransformerFactoryImpl&quot;&gt;&lt;/parameter&gt;<br>
&lt;/component&gt;
&lt;/components&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;File named &lt;strong&gt;sitemap-transformers-saxon-transformer.xconf&lt;/strong&gt;&lt;br /&gt;
&lt;pre&gt;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;??&gt;</p>
<p>&lt;components xmlns:map=&quot;http://apache.org/cocoon/sitemap/1.0&quot;&gt;
&lt;transformers&gt;
&lt;transformer name=&quot;xslt2&quot; src=&quot;org.apache.cocoon.transformation.TraxTransformer&quot;&gt;
&lt;xslt-processor-role&gt;saxon&lt;/xslt-processor-role&gt;
&lt;/transformer&gt;<br>
&lt;/transformers&gt;
&lt;/components&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Download &lt;a href=&quot;http://saxon.sourceforge.net/#F9.2HE&quot;&gt;Saxon-HE 9.2 for Java&lt;/a&gt;. By default, this will go into your Downloads folder.&lt;/li&gt;
&lt;li&gt;Extract the zip file; you can delete everything but &lt;em&gt;saxon9he.jar&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Open a new Terminal&lt;br /&gt;
&lt;pre&gt;cd cocoon
mvn install:install-file -DgroupId=net.sf.saxon -DartifactId=saxon -Dversion=9.2.1.2 -Dpackaging=jar -Dfile=../Downloads/saxon9he.jar&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;Go to &lt;em&gt;cocoon&lt;/em&gt; and open pom.xml&lt;/li&gt;
&lt;li&gt;At the bottom of &lt;dependencies&gt;, add:&lt;br /&gt;
&lt;pre&gt;
&lt;dependency&gt;<br>
&lt;groupid&gt;net.sf.saxon&lt;/groupid&gt;<br>
&lt;artifactid&gt;saxon&lt;/artifactid&gt;<br>
&lt;version&gt;9.2.1.2&lt;/version&gt;<br>
&lt;/dependency&gt;  &lt;/pre&gt;&lt;/dependencies&gt;&lt;/li&gt;
&lt;li&gt;If for some reason you only want Saxon 9 and not the ability to generate HTML, skip to the bottom of this section&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Installing HTML support
&lt;ul&gt;
&lt;li&gt;Still in pom.xml, at the bottom of &lt;dependencies&gt;, add:&lt;br /&gt;
&lt;pre&gt;
&lt;dependency&gt;
&lt;groupid&gt;org.apache.cocoon&lt;/groupid&gt;</p>
<p>&lt;artifactid&gt;cocoon-html-impl&lt;/artifactid&gt;
&lt;version&gt;1.0.0&lt;/version&gt;
&lt;/dependency&gt;&lt;/pre&gt;&lt;/dependencies&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Installing FOP (for PDFs)
&lt;ul&gt;
&lt;li&gt;Still in pom.xml, at the bottom of &lt;dependencies&gt;, add:&lt;br /&gt;
&lt;pre&gt;
&lt;dependency&gt;
&lt;groupid&gt;org.apache.cocoon&lt;/groupid&gt;
&lt;artifactid&gt;cocoon-fop-impl&lt;/artifactid&gt;
&lt;version&gt;1.0.0&lt;/version&gt;
&lt;/dependency&gt;</p>
<p>&lt;/pre&gt;&lt;/dependencies&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Installing Batik (SVG)
&lt;ul&gt;
&lt;li&gt;Still in pom.xml, at the bottom of &lt;dependencies&gt;, add:&lt;br /&gt;
&lt;pre&gt;
&lt;dependency&gt;
&lt;groupid&gt;org.apache.cocoon&lt;/groupid&gt;</p>
<p>&lt;artifactid&gt;cocoon-batik-impl&lt;/artifactid&gt;
&lt;version&gt;1.0.0&lt;/version&gt;
&lt;/dependency&gt;
&lt;/pre&gt;&lt;/dependencies&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Installing Forms
&lt;ul&gt;
&lt;li&gt;Still in pom.xml, at the bottom of &lt;dependencies&gt;, add:&lt;br /&gt;
&lt;pre&gt;
&lt;dependency&gt;
&lt;groupid&gt;org.apache.cocoon&lt;/groupid&gt;
&lt;artifactid&gt;cocoon-forms-impl&lt;/artifactid&gt;
&lt;version&gt;1.0.0-RC1&lt;/version&gt;</p>
<p>&lt;/dependency&gt;
&lt;/pre&gt;&lt;/dependencies&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;There's &lt;a href=&quot;http://cocoon.apache.org/2.2/blocks/1204_1_1.html&quot;&gt;a list of all blocks&lt;/a&gt;, and the syntax for the dependency code is in there someplace.&lt;/li&gt;
&lt;/ul&gt;
&lt;li&gt;&lt;strong&gt;Once you're done adding dependencies:&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;If you have a Terminal open with &lt;em&gt;[INFO] Started Jetty Server&lt;/em&gt;, close it.&lt;/li&gt;
&lt;li&gt;Open a new Terminal&lt;br /&gt;
&lt;pre&gt;cd cocoon</p>
<p>mvn compile&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;After it's done...&lt;br /&gt;
&lt;pre&gt;mvn jetty:run&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;h3&gt;Redirecting the Sitemap&lt;/h3&gt;
&lt;p&gt;You can add your pipelines to the &lt;em&gt;sitemap.xmap&lt;/em&gt; in cocoon/src/main/resources/COB-INF, or (more conveniently) you can tell that base sitemap to look elsewhere for your files.&lt;/p&gt;
&lt;p&gt;I'm assuming here that you have a folder called &lt;em&gt;myproject&lt;/em&gt; in your Home folder where you have all your files and your sitemap. Please change that, and your user name, accordingly.&lt;/p&gt;
&lt;p&gt;Included here is also the code to generate more useful error messages than a blank pages.&lt;/p&gt;
&lt;p&gt;In &lt;em&gt;sitemap.xmap&lt;/em&gt; in cocoon/src/main/resources/COB-INF, at the bottom of the&lt;br /&gt;
&lt;pipelines&gt; section, add:&lt;/pipelines&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;pipeline&gt;
&lt;handle-errors&gt;
&lt;generate type=&quot;exception&quot;&gt;&lt;/generate&gt;</p>
<p>&lt;serialize type=&quot;xml&quot;&gt;&lt;/serialize&gt;
&lt;/handle-errors&gt;<br>
&lt;match pattern=&quot;myproject/<strong>&quot;&gt;
&lt;mount uri-prefix=&quot;myproject/&quot; check-reload=&quot;yes&quot; src=&quot;/home/YOUR_USER_NAME/myproject/sitemap.xmap&quot; reload-method=&quot;synchron&quot;&gt;&lt;/mount&gt;
&lt;/match&gt;
&lt;/pipeline&gt;&lt;/pre&gt;&lt;p&gt;In this case, your project will be found at &lt;a href=&quot;http://localhost:8888/cocoon/myproject/[things&quot;&gt;http://localhost:8888/cocoon/myproject/[things&lt;/a&gt; that match your pipelines]. But it doesn't have to match the folder name with your files. You can change the URL by chanigng &lt;match pattern=&quot;myproject/</strong>&quot;&gt; to &lt;match pattern=&quot;whatever_you_want/**&quot;&gt;&lt;/match&gt;&lt;/match&gt;&lt;/p&gt;
&lt;h3&gt;Hints and Tips&lt;/h3&gt;
&lt;p&gt;Every time you restart Ubuntu, you have to restart Cocoon:&lt;/p&gt;
&lt;pre&gt;cd cocoon
mvn jetty:run&lt;/pre&gt;&lt;p&gt;            Be sure to keep that Terminal window open while you're working with Cocoon. You can always check if Cocoon is working by going to: &lt;a href=&quot;http://localhost:8888/cocoon&quot; title=&quot;http://localhost:8888/cocoon&quot;&gt;http://localhost:8888/cocoon&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This guide was prepared with help from a guide written on the GSLIS wiki by &lt;a href=&quot;http://piez.org/wendell/&quot;&gt;Wendell Piez&lt;/a&gt;. If you try it and something doesn't work, please post a comment. This document is licensed &lt;a href=&quot;http://creativecommons.org/licenses/by/3.0/us/&quot;&gt;Creative Commons Attribution&lt;/a&gt;.&lt;/p&gt;</p>

        
      </section>

      <footer class="page__meta">
        
        


        <!---->

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2010-10-10T00:00:00+00:00">October 10th 2010</time></p>

      </footer>

      

      
    </div>

   
  </article>

  
</div>
    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2023 Quinn Dombrowski. Powered by <a href="https://www.11ty.dev/" rel="nofollow">Eleventy</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a> (adapted as <a href="https://github.com/quinnanya/eleven-mistakes">Eleven Mistakes</a>).
<p>Also on <a rel="me" href="https://mstdn.social/@quinnanya">Mastodon</a></p>
</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>









  </body>
</html>
